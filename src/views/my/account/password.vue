<template>
  <div class="h-full">
    <div class="p-8 flex flex-col gap-1">
      <h1 class="text-lg font-bold">ğŸ” é‡ç½®å¯†ç </h1>
      <p class="text-gray-400 text-sm">ä»»ä½•æ—¶å€™è¯·ä¸è¦å°†æ‚¨çš„å¯†ç å‘ŠçŸ¥ä»–äºº</p>
    </div>
    <div class="bg-white shadow p-4">
      <van-form @submit="handelSubmit">
        <van-field
          v-model="data.password"
          name="password"
          label="åŸå¯†ç "
          type="password"
          placeholder="åŸå¯†ç "
          :rules="[{ required: true, message: 'è¯·å¡«å†™åŸå¯†ç ' }]"
        />
        <van-field
          v-model="data.newpassword"
          type="password"
          name="newpassword"
          label="æ–°å¯†ç "
          placeholder="æ–°å¯†ç "
          :rules="[{ required: true, message: 'è¯·è¾“å…¥æ–°å¯†ç ' }]"
        />
        <van-field
          v-model="data.renewpassword"
          type="password"
          name="renewpassword"
          label="ç¡®è®¤å¯†ç "
          placeholder="ç¡®è®¤å¯†ç "
          :rules="[{ required: true, message: 'è¯·è¾“å…¥ç¡®è®¤å¯†ç ' }]"
        />
        <div class="px-4 pt-4 text-gray-400 text-xs">æç¤ºï¼šå¯†ç å¿…é¡»æ˜¯8-16ä½è‹±æ–‡å­—æ¯ã€æ•°å­—ã€å­—ç¬¦ç»„åˆ</div>
        <div style="margin: 16px">
          <van-button block type="primary" native-type="submit"> æäº¤ </van-button>
        </div>
      </van-form>
    </div>
    <Footer></Footer>
  </div>
</template>

<script setup lang="ts">
import { ref } from "vue";
import { changePasswordApi } from "@/api/modules/permission";
import { showSuccessToast } from "vant";

type PasswordFormData = {
  password: string;
  newpassword: string;
  renewpassword: string;
};

const data = ref<PasswordFormData>({
  password: "",
  newpassword: "",
  renewpassword: ""
});

const handelSubmit = async (formData: PasswordFormData) => {
  try {
    await changePasswordApi(formData);
    showSuccessToast("å¯†ç ä¿®æ”¹æˆåŠŸ");
  } catch (error) {
    console.log(error);
  }
};
</script>

<style scoped></style>
<route lang="yaml">
name: "MyAccountPassword"
</route>
